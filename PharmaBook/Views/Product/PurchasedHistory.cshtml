
@{
    ViewData["Title"] = "PurchasedHistory";
}
<script type="text/javascript">
    function printDiv(divName) {
        $('#prntbtn').hide();
        var printContents = document.getElementById(divName).innerHTML;
        //var newLbl = $("#prntprdlst,#tbl1 tr").find("input:text,th:last,td:eq(7)").remove().end().html();
        var printWindow = window.open('', '', 'height=400,width=800');
        printWindow.document.write('<html><head><title style=""></title>');
        printWindow.document.write('</head><body>');
        printWindow.document.write(printContents);
        printWindow.document.write('</body></html>');
        printWindow.document.close();
        printWindow.print();
        location.reload();
    }
</script>

<h2>Purchased History Inbox</h2>
<div class="blankpage-main" ng-controller="ProductController">   
    <div class="row mt">
        <div class="col-md-12">
            <div class="content-panel">
                <div class="row">
                    <div class="col-xs-4">
                        <label>Total Medicine : {{purchasedhistry.length}}</label>
                        <input type="button" onclick="printDiv('prntprdlst')" class="btn btn-primary" value="print record" id="prntbtn" />
                    </div>
                    <div class="col-xs-4">
                        <select class="form-control" ng-model="vendorDDL" id="exampleSelect1" ng-change="getSelectedVendor()">
                            <option value="">-- All vendor--</option>
                            <option ng-repeat="item in VendorList" value="{{item.vendorName}}">{{item.vendorName}}</option>
                        </select>                               
                        </div>
                    <div class="col-xs-4 right">
                        <select class="form-control" placeholder="Medicine" ng-model="ItemNameMedicine"
                                ng-change="medicineselect()">
                            <option value="">-- All Medicine--</option>
                            <option ng-repeat="m in ProductList" value="{{m.name}}">{{m.name}}</option>
                        </select>
                    </div>
                </div>
                <div style="overflow: auto;height: 550px;" id="prntprdlst">
                    <div ng-show="hide">
                        <h1 style="text-align:center">{{curuser.clinicname}}</h1>
                        <h3 style="text-align:center">{{curuser.address}}</h3>
                        <h3 style="text-align:center">{{curuser.email}}|{{curuser.mobile}}</h3>
                        <h3 style="text-align:center">{{curuser.dlno}}</h3>
                        <h2 style="text-align:center">Purchased History</h2>
                        <hr />
                    </div>
                    <table class="table table-striped table-advance table-hover" rules="rows">
                        <thead>                           
                            <tr>
                                <th>#</th>
                                <th>Medicine Name</th>
                                <th>Batch No</th>
                                <th>Exp Date</th>
                                <th>Mfg</th>
                                <th>M.R.P</th>
                                <th>Qty</th>
                                <th>Purchased Date</th>
                                <th>Vendor</th>                               
                                <th>remark  </th>
                            </tr>                            
                        </thead>                        
                        <tbody>                            
                            <tr ng-repeat="item in purchasedhistry|filter: searchbox" ng-init="vndrlst=VendorList[0].vendorName">
                                <td>{{$index+1}}</td>
                                <td>{{item.name}}</td>
                                <td>{{item.batchNo}}</td>
                                <td>{{item.expDate}}</td>
                                <td>{{item.mfg}}</td>
                                <td>{{item.mrp}}</td>
                                <td>{{item.qty}}</td>
                                <td>{{item.purchasedDated}}</td>
                                <td>{{item.vendorname}} <br />
                                {{item.vendoradres}} <br />
                                {{item.vendorcompany}}</td>                              
                                <td>{{item.remark}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div><!-- /content-panel -->
        </div><!-- /col-md-12 -->
    </div>
</div>

