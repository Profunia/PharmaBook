
@{
    ViewData["Title"] = "Index";
}
<style>
    h1,h2,h3 {      
        line-height: 10px;
    }

</style>
<script type="text/javascript">
    function printDiv(divName,id) {
        $('.btn').hide();
        var colcnt = ($("#" + id).find('tr')[0].cells.length)-1;
        var printContents = document.getElementById(divName).innerHTML; 
        var newLbl = $("#" + divName + ",#" + id + " tr").find("input:text,th:last,td:eq("+colcnt+")").remove().end().html();
        var printWindow = window.open('', '', 'height=400,width=800');
        printWindow.document.write('<html><head><title style=""></title>');
        printWindow.document.write('</head><body>');
        if (id != 'tbl2') {
        }
        printWindow.document.write(newLbl);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.print();
            location.reload();
    }
</script>
<h2>Purchased Inbox</h2>
<div class="blankpage-main" ng-controller="PurchasedInboxController">
    <div ng-show="!childPoView && !purchasedEntryView">
        <div class="row">
            <div class="col-xs-6">
                <span>Total PO Created:</span> <strong> {{masterPo.length}}</strong> <br/>     
            </div>
            <div class="col-xs-4">
                <label>Filter : </label>             
                <label class="radio-inline"><input type="radio" name="optradio" checked ng-click="onInboxFiler('Open')" >Open</label>
                <label class="radio-inline"><input type="radio" name="optradio" ng-click="onInboxFiler('Closed')">Closed</label>
                <label class="radio-inline"><input type="radio" name="optradio" ng-click="onInboxFiler('All')">All</label>
                <input type="button" onclick="printDiv('Open','tbl1')" class="btn btn-primary" value="print record" id="prntbtn" style="float:right"/>
            </div>
            <div class="col-xs-4">
               
            </div>
        </div>
        <hr />
        <div id="Open">           
            <div ng-show="hide">
                <h1 style="text-align:center;line-height:10px">{{curuser.clinicname}}</h1>
                <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.address}}</h3>
                <h3 style="text-align:center;line-height:10px;font-weight:normal">Email: {{curuser.email}} | Mobile: {{curuser.mobile}}</h3>
                <h3 style="text-align:center;line-height:10px;font-weight:normal">D.L No: {{curuser.dlno}}</h3>               
                <table style="width:100%"><tr>
                     <td style="float:left">@DateTime.Now.ToString("dd/MM/yyyy")</td>
                    <td><h2 style="text-align:center;line-height:10px">Purchased Order Inbox</h2></td>
                    <td style="float:right">adsdsdsd</td>
                     </tr></table>
                <hr />
            </div>
        <table class="table table-striped table-advance table-hover" rules="rows" style="width:100%" id="tbl1">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Vendor</th>
                    <th style="text-align:center">Created Date</th>
                    <th style="text-align:center">No Of Medicine</th>
                    <th style="text-align:center">Status</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in masterPo| filter:inboxfiler">
                    <td>
                        {{$index + 1}}
                        
                    </td>
                    <td>
                        {{item.vendorName }}<br /> {{item.vendorCompany}}
                        <br />{{item.vendorAddress}}, {{item.vendorContact}}
                    </td>
                    <td style="text-align:center">{{item.placedOrder}}</td>
                    <td style="text-align:center">{{item.noOfItems}}</td>
                    <td style="text-align:center">{{item.status}}</td>
                    <td><a ng-click="childDetails(item);" style="cursor:pointer;">View details</a></td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    <div ng-show="childPoView && !purchasedEntryView">
        <div class="row">
            <div class="col-xs-6">
                <label>Total Medicine: <strong> {{childPO.cpoList.length}}</strong> </label><br />                
                <label>Vendor : </label> 
                {{childPO.vendorName }}, {{childPO.vendorCompany}}, {{childPO.vendorAddress}}, {{childPO.vendorContact}}                
            </div>
            <div class="col-xs-6" style="float:right">

               <button class="btn btn-primary" ng-click="backtoPurchased();">
                   << Purchased Order Inbox
               </button>
                <button class="btn btn-primary" ng-click="CreatePurchased();" >
                    Create Purchased 
                </button>
                <input type="button" onclick="printDiv('Closed','tbl2')" class="btn btn-primary" value="print record" id="prntbtn" />
            </div>
        </div>
        <div id="Closed">
            <div ng-show="hide">
                <h1 style="text-align:center;line-height:10px;">{{curuser.clinicname}}</h1>
                <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.address}}</h3>
                <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.email}}|{{curuser.mobile}}</h3>
                <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.dlno}}</h3>               
                <table style="width:100%">
                    <tr>
                        <td style="float:left">@DateTime.Now.ToString("dd/MM/yyyy")</td>
                        <td><h2 style="text-align:center;line-height:10px">Purchased Order Details</h2></td>
                        <td style="float:right">adsdsdsd</td>
                    </tr>
                </table>
                <hr />
            </div>
            <table class="table table-striped table-advance table-hover" rules="rows" style="width:100%" id="tbl2">
                <thead>
                    <tr>
                        <th>#</th>
                        <th style="text-align:center">Product ID</th>
                        <th>Name</th>
                        <th>Mfg</th>
                        <th style="text-align:center">Qty</th>
                        <th style="text-align:center">Remark</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in childPO.cpoList">
                        <td>
                            {{$index + 1}}
                        </td>
                        <td style="text-align:center">{{item.productID}} </td>
                        <td>{{item.productName}}</td>
                        <td>{{item.mfg}}</td>
                        <td style="text-align:center">{{item.qty}}</td>
                        <td style="text-align:center">{{item.remarks}}</td>
                        <td> <a href="" ng-click="DeletePurchasedItem(item)"><span style="color:red;"> X </span></a> </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
   
    <div ng-show="purchasedEntryView">
        
        <div ng-show="!isSuccessPOEntry">



            <div class="row">
                <div class="col-xs-4">
                    <button class="btn btn-primary" ng-click="backToMail();">
                        << Purchased Order Inbox
                    </button>
                    <input type="button" onclick="printDiv('All','tbl3')" class="btn btn-primary" value="print record" id="prntbtn" />
                </div>
                <div class="col-xs-8">
                    <label>Total Medicine: <strong> {{childPO.cpoList.length}}</strong> </label><br />
                    <label>Vendor : </label>
                    {{childPO.vendorName }}, {{childPO.vendorCompany}}, {{childPO.vendorAddress}}, {{childPO.vendorContact}}
                </div>

            </div>
            <div id="All">
                <div ng-show="hide">
                    <h1 style="text-align:center;line-height:10px;">{{curuser.clinicname}}</h1>
                    <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.address}}</h3>
                    <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.email}}|{{curuser.mobile}}</h3>
                    <h3 style="text-align:center;line-height:10px;font-weight:normal">{{curuser.dlno}}</h3>
                    <table style="width:100%">
                        <tr>
                            <td style="float:left">@DateTime.Now.ToString("dd/MM/yyyy")</td>
                            <td><h2 style="text-align:center;line-height:10px">Created Purchased Inbox</h2></td>
                            <td style="float:right">adsdsdsd</td>
                        </tr>
                    </table>                    
                    <hr />
                </div>
                <table class="table table-striped table-advance table-hover" rules="rows" style="width:100%" id="tbl3">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Mfg</th>
                            <th>Qty</th>
                            <th>Batch No.</th>
                            <th>MRP</th>
                            <th>Exp Date</th>
                            <th>Remark</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in Prepurchased">
                            <td>
                                {{$index + 1}}
                            </td>

                            <td>{{item.Name}}</td>
                            <td>{{item.Mfg}}</td>
                            <td><input type="number" min="1" ng-model="item.Qty" class="form-control" placeholder="Qty" /></td>
                            <td><input type="text" ng-model="item.BatchNo" class="form-control" placeholder="batch No" /></td>
                            <td><input type="text" ng-model="item.MRP" class="form-control" placeholder="MRP" /></td>
                            <td><input type="text" ng-model="item.ExpDate" class="form-control" placeholder="Exp Date" /></td>
                            <td><input type="text" ng-model="item.Remark" class="form-control" placeholder="Remarks" /></td>

                        </tr>
                    </tbody>
                </table>
            </div>
            <hr />
            <button class="btn btn-primary" ng-click="onSubmitforCreatePurchased()">
                Submit
            </button>
        </div>
        <div ng-show="isSuccessPOEntry">
            
                <div class="row alert alert-success" ng-show="isSuccessPOEntry">
                    <strong>Success!</strong> {{POmsg}}
                    <br /><br /> <hr />
                    <a class="btn btn-primary" asp-action="Index" asp-controller="Purchased">
                        << Purchsed Inbox
                    </a>
                </div>
                <div class="row alert alert-danger" ng-show="!isSuccessPOEntry">
                    <strong>Error!</strong> {{POmsg}}
                </div>
            
        </div>
    </div>

     
</div>
